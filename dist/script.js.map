{"version":3,"sources":["script.js"],"names":["input","document","getElementById","button","isoToDate","date","Date","toLocaleDateString","weekday","year","month","day","updateWeatherUI","data","textContent","current","time","Math","round","temperature_2m","apparent_temperature","relative_humidity_2m","wind_speed_10m","precipitation","addEventListener","value","console","log","fetch","concat","encodeURIComponent","then","res","json","length","_data$","lat","lon","locationName","display_name","split","locationResult","trim","meteoUrl","alert","meteoData","err","error"],"mappings":"AAAA,aAMA,IAAMA,MAAQC,SAASC,eAAe,eAChCC,OAASF,SAASC,eAAe,aAqCvC,SAASE,UAAUC,GAcjB,OAXgB,IAAIC,KAFJD,GAWUE,mBAAmB,QAP7B,CACdC,QAAS,OACTC,KAAM,UACNC,MAAO,QACPC,IAAK,WAMT,CAGA,SAASC,gBAAgBC,GACvBZ,SAASC,eAAe,QAAQY,YAAcV,UAAUS,EAAKE,QAAQC,MAErEf,SAASC,eAAe,eAAeY,YACrCG,KAAKC,MAAML,EAAKE,QAAQI,gBAAkB,IAE5ClB,SAASC,eAAe,qBAAqBY,YAC3CG,KAAKC,MAAML,EAAKE,QAAQK,sBAAwB,IAElDnB,SAASC,eAAe,YAAYY,YAClCD,EAAKE,QAAQM,qBAAuB,IAEtCpB,SAASC,eAAe,QAAQY,YAC9BG,KAAKC,MAAML,EAAKE,QAAQO,gBAAkB,OAE5CrB,SAASC,eAAe,iBAAiBY,YACvCD,EAAKE,QAAQQ,cAAgB,IACjC,CAtEApB,OAAOqB,iBAAiB,QAAS,WAC/B,IAAMC,EAAQzB,MAAMyB,MACpBC,QAAQC,IAAIF,GAGZG,MAAK,sCAAAC,OAAuCC,mBAAmBL,KAC5DM,KAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAM,GACtBF,KAAK,SAAAlB,GACJ,GAAKA,EAAKqB,OAAV,CAKA,IAAAC,EAAmCtB,EAAK,GAAhCuB,EAAGD,EAAHC,IAAKC,EAAGF,EAAHE,IAGPC,EAHwBH,EAAZI,aAGgBC,MAAM,KAElCC,EAAiBH,EAAa,GAAGI,OAAS,KAAOJ,EAAaA,EAAaJ,OAAS,GAAGQ,OAE7FzC,SAASC,eAAe,YAAYY,YAAc2B,EAGlD,IAAME,EAAQ,mDAAAd,OAAsDO,EAAG,eAAAP,OAAcQ,EAAG,kGAExF,OAAOT,MAAMe,EAdb,CAFEC,MAAM,wBAiBV,GACCb,KAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAM,GACtBF,KAAK,SAAAc,GACJjC,gBAAgBiC,EAClB,GAAE,MACK,SAAAC,GAAG,OAAIpB,QAAQqB,MAAMD,EAAI,EACpC","file":"script.js","sourcesContent":["// Exemple d'une réponse\n// https://api.open-meteo.com/v1/forecast?latitude=52.52&longitude=13.41&hourly=temperature_2m&models=gfs_seamless\n\n// Récupérer la valeur de l'input de search\n// Au moment où l'utilisateur clique sur search, afficher la ville correspondante\n\nconst input = document.getElementById(\"searchInput\");\nconst button = document.getElementById(\"searchBtn\");\n\nbutton.addEventListener(\"click\", () => {\n  const value = input.value;\n  console.log(value);\n\n  // Fetch du backend de l'API Nominatim pour récupérer les données géoloc via la valeur de l'input\n  fetch(`http://localhost:3002/api/search?q=${encodeURIComponent(value)}`)\n    .then(res => res.json())\n    .then(data => {\n      if (!data.length) {\n        alert(\"Aucun résultat trouvé\");\n        return;\n      }\n\n      const { lat, lon, display_name } = data[0];\n\n      // Transformation du display name pour n'afficher que la ville et le pays\n      const locationName = display_name.split(\",\");\n\n      const locationResult = locationName[0].trim() + \", \" + locationName[locationName.length - 1].trim();\n\n      document.getElementById(\"location\").textContent = locationResult;\n\n      // Deuxième fetch pour aller récupérer les données de l'API Open Meteo\n      const meteoUrl = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,precipitation,wind_speed_10m,apparent_temperature`;\n\n      return fetch(meteoUrl);\n    })\n    .then(res => res.json())\n    .then(meteoData => {\n      updateWeatherUI(meteoData);\n    })\n    .catch(err => console.error(err));\n});\n\n// Formatage de la date iso récupérée de l'API \nfunction isoToDate(date) {\n  const isoTime = date;\n\n  const dateObj = new Date(isoTime);\n\n  const options = {\n    weekday: \"long\",   // Tuesday\n    year: \"numeric\",   // 2025\n    month: \"short\",    // Aug\n    day: \"numeric\"     // 5\n  };\n\n  const formatted = dateObj.toLocaleDateString(\"en-US\", options);\n\n  return formatted;\n}\n\n// Update HTML des données récupérées \nfunction updateWeatherUI(data) {\n  document.getElementById(\"time\").textContent = isoToDate(data.current.time);\n\n  document.getElementById(\"temperature\").textContent =\n    Math.round(data.current.temperature_2m) + \"°\";\n\n  document.getElementById(\"temperature-feels\").textContent =\n    Math.round(data.current.apparent_temperature) + \"°\";\n\n  document.getElementById(\"humidity\").textContent =\n    data.current.relative_humidity_2m + \"%\";\n\n  document.getElementById(\"wind\").textContent =\n    Math.round(data.current.wind_speed_10m) + \"km/h\";\n\n  document.getElementById(\"precipitation\").textContent =\n    data.current.precipitation + \"mm\";\n}"]}